<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meeting Timer - Professional Meeting Facilitator</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- Custom App Icon -->
    <link rel="icon" type="image/png" sizes="32x32" href="https://user-gen-media-assets.s3.amazonaws.com/gpt4o_images/d41f3c36-8a53-45a8-b345-80653106cf73.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://user-gen-media-assets.s3.amazonaws.com/gpt4o_images/d41f3c36-8a53-45a8-b345-80653106cf73.png">
    <link rel="apple-touch-icon" href="https://user-gen-media-assets.s3.amazonaws.com/gpt4o_images/d41f3c36-8a53-45a8-b345-80653106cf73.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiTWVldGluZyBUaW1lciAtIFByb2Zlc3Npb25hbCBNZWV0aW5nIEZhY2lsaXRhdG9yIiwic2hvcnRfbmFtZSI6Ik1lZXRpbmcgVGltZXIiLCJkZXNjcmlwdGlvbiI6IlByb2Zlc3Npb25hbCBtZWV0aW5nIGZhY2lsaXRhdGlvbiB0b29sIHdpdGggcmVhbC10aW1lIHNoYXJpbmcgYW5kIGJyZWFrIG1hbmFnZW1lbnQiLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsInN0YXJ0X3VybCI6Ii8iLCJ0aGVtZV9jb2xvciI6IiMyNTYzZWIiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiI2Y4ZmFmYyIsImljb25zIjpbeyJzcmMiOiJodHRwczovL3VzZXItZ2VuLW1lZGlhLWFzc2V0cy5zMy5hbWF6b25hd3MuY29tL2dwdDRvX2ltYWdlcy9kNDFmM2MzNi04YTUzLTQ1YTgtYjM0NS04MDY1MzEwNmNmNzMucG5nIiwic2l6ZXMiOiIxOTJ4MTkyIiwidHlwZSI6ImltYWdlL3BuZyIsInB1cnBvc2UiOiJhbnkgbWFza2FibGUifSx7InNyYyI6Imh0dHBzOi8vdXNlci1nZW4tbWVkaWEtYXNzZXRzLnMzLmFtYXpvbmF3cy5jb20vZ3B0NG9faW1hZ2VzL2Q0MWYzYzM2LThhNTMtNDVhOC1iMzQ1LTgwNjUzMTA2Y2Y3My5wbmciLCJzaXplcyI6IjUxMng1MTIiLCJ0eXBlIjoiaW1hZ2UvcG5nIiwicHVycG9zZSI6ImFueSBtYXNrYWJsZSJ9XSwiZWRnZV9zaWRlX3BhbmVsIjp7InByZWZlcnJlZF93aWR0aCI6Mzc2fSwiY2F0ZWdvcmllcyI6WyJwcm9kdWN0aXZpdHkiLCJidXNpbmVzcyJdLCJzY3JlZW5zaG90cyI6W10sImxhbmciOiJlbiJ9">
    
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Meeting Timer">
</head>
<body data-theme="professional-blue" data-font-size="medium">
    <div class="app">
        <!-- Header with Navigation -->
        <header class="app-header">
            <div class="container">
                <div class="flex items-center justify-between">
                    <h1 class="app-title">Meeting Timer</h1>
                    <div class="header-info">
                        <div class="header-status">
                            <div id="participant-count" class="participant-count hidden">
                                <span id="participant-number">1</span> participants
                            </div>
                            <div id="connection-status" class="connection-status">
                                <span class="status-indicator"></span>
                                <span id="connection-text">Ready</span>
                            </div>
                        </div>
                        <span id="current-time" class="current-time"></span>
                    </div>
                </div>
                <!-- Tab Navigation -->
                <nav class="tab-navigation">
                    <button id="tab-setup" class="tab-button active" data-view="setup">Setup</button>
                    <button id="tab-timer" class="tab-button" data-view="timer">Timer</button>
                    <button id="tab-settings" class="tab-button" data-view="settings">Settings</button>
                    <button id="tab-summary" class="tab-button" data-view="summary">Summary</button>
                </nav>
            </div>
        </header>

        <!-- Setup Phase View -->
        <div id="setup-view" class="view">
            <div class="container">
                <div class="setup-container">
                    <div class="setup-header">
                        <h2>Setup Meeting Agenda</h2>
                        <p class="text-secondary">Add agenda items with estimated times to get started</p>
                    </div>

                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <button id="load-template-btn" class="btn btn--outline">Load Template</button>
                        <button id="import-agenda-btn" class="btn btn--outline">Import Agenda</button>
                    </div>

                    <!-- Add Agenda Item Form -->
                    <div class="card agenda-form">
                        <div class="card__body">
                            <h3>Add Agenda Item</h3>
                            <form id="agenda-form">
                                <div class="form-group">
                                    <label for="item-title" class="form-label">Title</label>
                                    <input type="text" id="item-title" class="form-control" placeholder="e.g., Project Status Review" required>
                                </div>
                                <div class="form-group">
                                    <label for="item-time" class="form-label">Estimated Time (minutes)</label>
                                    <input type="number" id="item-time" class="form-control" min="1" max="180" placeholder="15" required>
                                </div>
                                <div class="form-group">
                                    <label for="item-description" class="form-label">Description</label>
                                    <textarea id="item-description" class="form-control" rows="3" placeholder="Brief description of what will be discussed..."></textarea>
                                </div>
                                <button type="submit" class="btn btn--primary">Add Item</button>
                            </form>
                        </div>
                    </div>

                    <!-- Agenda Items List -->
                    <div class="agenda-list">
                        <div class="agenda-summary">
                            <div class="flex items-center justify-between">
                                <h3>Agenda Items (<span id="item-count">0</span>)</h3>
                                <div class="total-time">
                                    <span class="text-secondary">Total Time: </span>
                                    <span id="total-time" class="total-time-value">0 min</span>
                                </div>
                            </div>
                        </div>
                        
                        <div id="agenda-items" class="agenda-items">
                            <!-- Agenda items will be inserted here -->
                        </div>

                        <div class="setup-actions">
                            <button id="export-agenda-btn" class="btn btn--secondary">Export Agenda</button>
                            <button id="confirm-agenda" class="btn btn--primary btn--lg" disabled>
                                Start Meeting Timer
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Timer Phase View -->
        <div id="timer-view" class="view hidden">
            <div class="container">
                <div class="timer-container">
                    <!-- Session Sharing -->
                    <div id="sharing-section" class="sharing-section">
                        <div class="card">
                            <div class="card__body">
                                <div class="sharing-controls">
                                    <div class="sharing-info">
                                        <h4>Share Meeting Session</h4>
                                        <p class="text-secondary">Share this URL with participants to let them follow along</p>
                                    </div>
                                    <div class="sharing-actions">
                                        <button id="share-meeting-btn" class="btn btn--outline btn--sm">Share Meeting</button>
                                        <div id="share-url-container" class="share-url-container hidden">
                                            <input type="text" id="share-url" class="form-control" readonly>
                                            <button id="copy-share-url" class="btn btn--primary btn--sm">Copy</button>
                                        </div>
                                    </div>
                                </div>
                                <div id="participant-mode-indicator" class="participant-mode-indicator hidden">
                                    <span class="status--info">ðŸ‘¥ Participant View - Following facilitator</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Progress Indicator -->
                    <div class="progress-section">
                        <div class="progress-info">
                            <span id="progress-text" class="progress-text">Item 1 of 4</span>
                            <span id="agenda-status" class="agenda-status">On Track</span>
                        </div>
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                    </div>

                    <!-- Break Mode Indicator -->
                    <div id="break-mode" class="break-mode hidden">
                        <div class="card break-card">
                            <div class="card__body">
                                <div class="break-header">
                                    <h3>â˜• Meeting Break</h3>
                                    <div class="break-timer">
                                        <span id="break-time">05:30</span>
                                        <span class="break-label">break time</span>
                                    </div>
                                </div>
                                <div class="break-controls">
                                    <button id="end-break-btn" class="btn btn--primary">Resume Meeting</button>
                                    <div class="break-settings">
                                        <label for="break-duration" class="form-label">Target break duration:</label>
                                        <select id="break-duration" class="form-control">
                                            <option value="5">5 minutes</option>
                                            <option value="10">10 minutes</option>
                                            <option value="15" selected>15 minutes</option>
                                            <option value="30">30 minutes</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Current Item Display -->
                    <div id="current-item-section" class="current-item-card">
                        <div class="current-item-header">
                            <h2 id="current-item-title">Current Agenda Item</h2>
                            <p id="current-item-description" class="current-item-description"></p>
                        </div>
                        
                        <!-- Main Timer Display -->
                        <div class="timer-display">
                            <div id="timer-circle" class="timer-circle">
                                <div id="timer-text" class="timer-text">15:00</div>
                                <div id="timer-status" class="timer-status-text"></div>
                            </div>
                        </div>

                        <!-- Timer Controls -->
                        <div id="facilitator-controls" class="timer-controls">
                            <button id="start-pause-btn" class="btn btn--primary btn--lg">Start</button>
                            <button id="take-break-btn" class="btn btn--secondary">Take Break</button>
                            <button id="stop-btn" class="btn btn--outline">Stop</button>
                            <button id="next-item-btn" class="btn btn--outline">Next Item</button>
                        </div>

                        <!-- Participant Controls (Read-only) -->
                        <div id="participant-controls" class="participant-controls hidden">
                            <p class="text-secondary">Following meeting progress...</p>
                        </div>
                    </div>

                    <!-- Overtime Section -->
                    <div id="overtime-section" class="overtime-section hidden">
                        <div class="card">
                            <div class="card__body">
                                <h3>Overtime Notes</h3>
                                <div class="form-group">
                                    <label for="overtime-notes" class="form-label">Discussion Notes</label>
                                    <textarea id="overtime-notes" class="form-control" rows="3" placeholder="Notes about what needs follow-up discussion..."></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Participants for Follow-up</label>
                                    <div id="participants-list" class="participants-checkboxes">
                                        <!-- Participant checkboxes will be inserted here -->
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="overtime-reason" class="form-label">Reason for Overtime</label>
                                    <select id="overtime-reason" class="form-control">
                                        <option value="">Select reason...</option>
                                        <!-- Options will be populated dynamically -->
                                    </select>
                                </div>
                                <button id="save-overtime-notes" class="btn btn--primary">Save Notes</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings View -->
        <div id="settings-view" class="view hidden">
            <div class="container">
                <div class="settings-container">
                    <div class="settings-header">
                        <h2>Settings</h2>
                        <p class="text-secondary">Customize your meeting timer experience</p>
                    </div>

                    <!-- Appearance Settings -->
                    <div class="card settings-section">
                        <div class="card__body">
                            <h3>Appearance</h3>
                            <div class="settings-grid">
                                <div class="form-group">
                                    <label for="theme-select" class="form-label">Color Theme</label>
                                    <select id="theme-select" class="form-control">
                                        <option value="professional-blue">Professional Blue</option>
                                        <option value="green-nature">Green Nature</option>
                                        <option value="purple-corporate">Purple Corporate</option>
                                        <option value="orange-energy">Orange Energy</option>
                                        <option value="dark-mode">Dark Mode</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="font-size-select" class="form-label">Font Size</label>
                                    <select id="font-size-select" class="form-control">
                                        <option value="small">Small (14px)</option>
                                        <option value="medium">Medium (16px)</option>
                                        <option value="large">Large (18px)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Team Members Settings -->
                    <div class="card settings-section">
                        <div class="card__body">
                            <h3>Team Members</h3>
                            <div class="settings-actions">
                                <button id="import-team-btn" class="btn btn--outline btn--sm">Import JSON</button>
                                <button id="export-team-btn" class="btn btn--outline btn--sm">Export JSON</button>
                            </div>
                            
                            <div class="add-member-form">
                                <div class="form-group">
                                    <input type="text" id="new-member-name" class="form-control" placeholder="Enter team member name">
                                    <button id="add-member-btn" class="btn btn--primary btn--sm">Add</button>
                                </div>
                            </div>

                            <div id="team-members-list" class="members-list">
                                <!-- Team members will be listed here -->
                            </div>

                            <div class="drag-drop-area" id="team-drop-area">
                                <p>Drop JSON file here or click Import JSON</p>
                            </div>
                        </div>
                    </div>

                    <!-- Overtime Reasons Settings -->
                    <div class="card settings-section">
                        <div class="card__body">
                            <h3>Overtime Reasons</h3>
                            <div class="settings-actions">
                                <button id="import-reasons-btn" class="btn btn--outline btn--sm">Import JSON</button>
                                <button id="export-reasons-btn" class="btn btn--outline btn--sm">Export JSON</button>
                            </div>
                            
                            <div class="add-reason-form">
                                <div class="form-group">
                                    <input type="text" id="new-reason-text" class="form-control" placeholder="Enter overtime reason">
                                    <button id="add-reason-btn" class="btn btn--primary btn--sm">Add</button>
                                </div>
                            </div>

                            <div id="overtime-reasons-list" class="reasons-list">
                                <!-- Overtime reasons will be listed here -->
                            </div>

                            <div class="drag-drop-area" id="reasons-drop-area">
                                <p>Drop JSON file here or click Import JSON</p>
                            </div>
                        </div>
                    </div>

                    <!-- Template Management -->
                    <div class="card settings-section">
                        <div class="card__body">
                            <h3>Agenda Templates</h3>
                            <div class="settings-actions">
                                <button id="save-template-btn" class="btn btn--outline btn--sm">Save Current as Template</button>
                            </div>
                            
                            <div id="templates-list" class="templates-list">
                                <!-- Templates will be listed here -->
                            </div>
                        </div>
                    </div>

                    <!-- Break Settings -->
                    <div class="card settings-section">
                        <div class="card__body">
                            <h3>Break Settings</h3>
                            <div class="settings-grid">
                                <div class="form-group">
                                    <label for="break-sound-select" class="form-label">Break Notification Sound</label>
                                    <select id="break-sound-select" class="form-control">
                                        <option value="gentle-chime">Gentle Chime</option>
                                        <option value="soft-bell">Soft Bell</option>
                                        <option value="none">None</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="break-reminder" class="form-label">Break Reminder (minutes before)</label>
                                    <select id="break-reminder" class="form-control">
                                        <option value="2">2 minutes</option>
                                        <option value="5" selected>5 minutes</option>
                                        <option value="10">10 minutes</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Data Management -->
                    <div class="card settings-section">
                        <div class="card__body">
                            <h3>Data Management</h3>
                            <div class="settings-actions">
                                <button id="clear-data-btn" class="btn btn--outline btn--sm">Clear All Data</button>
                                <button id="backup-data-btn" class="btn btn--primary btn--sm">Backup Settings</button>
                                <button id="restore-data-btn" class="btn btn--outline btn--sm">Restore Settings</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Summary View -->
        <div id="summary-view" class="view hidden">
            <div class="container">
                <div class="summary-container">
                    <div class="summary-header">
                        <h2>Meeting Summary</h2>
                        <p class="text-secondary">Review completed agenda items and break times</p>
                    </div>

                    <!-- Meeting Overview -->
                    <div class="card meeting-overview">
                        <div class="card__body">
                            <h3>Meeting Overview</h3>
                            <div class="overview-stats">
                                <div class="stat-item">
                                    <span class="stat-label">Total Items:</span>
                                    <span id="summary-total-items" class="stat-value">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Estimated Time:</span>
                                    <span id="summary-estimated-time" class="stat-value">0 min</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Actual Time:</span>
                                    <span id="summary-actual-time" class="stat-value">0 min</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Break Time:</span>
                                    <span id="summary-break-time" class="stat-value">0 min</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Overtime Items:</span>
                                    <span id="summary-overtime-items" class="stat-value">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Participants:</span>
                                    <span id="summary-participants" class="stat-value">1</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Items Summary -->
                    <div class="card">
                        <div class="card__body">
                            <h3>Agenda Items Summary</h3>
                            <div id="items-summary" class="items-summary-list">
                                <!-- Summary items will be inserted here -->
                            </div>
                        </div>
                    </div>

                    <!-- Follow-up Actions -->
                    <div id="followup-section" class="card hidden">
                        <div class="card__body">
                            <h3>Follow-up Actions</h3>
                            <div id="followup-list" class="followup-list">
                                <!-- Follow-up items will be inserted here -->
                            </div>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="summary-actions">
                        <button id="export-summary" class="btn btn--primary">Copy Summary to Clipboard</button>
                        <button id="start-new-meeting" class="btn btn--outline">Start New Meeting</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <div id="template-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Load Agenda Template</h3>
                    <button id="close-template-modal" class="btn-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="template-options">
                        <!-- Template options will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <div id="recovery-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Session Recovery</h3>
                </div>
                <div class="modal-body">
                    <p>A previous session was detected. Would you like to recover your meeting progress?</p>
                    <div class="modal-actions">
                        <button id="recover-session-btn" class="btn btn--primary">Recover Session</button>
                        <button id="start-fresh-btn" class="btn btn--outline">Start Fresh</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hidden file inputs -->
        <input type="file" id="agenda-file-input" accept=".json" style="display: none;">
        <input type="file" id="team-file-input" accept=".json" style="display: none;">
        <input type="file" id="reasons-file-input" accept=".json" style="display: none;">
        <input type="file" id="backup-file-input" accept=".json" style="display: none;">
    </div>

    <script src="app.js"></script>
</body>
</html>